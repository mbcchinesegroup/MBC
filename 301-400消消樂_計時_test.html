<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>301-400åå¥é…å°æ¶ˆæ¶ˆæ¨‚éŠæˆ²</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", Arial, sans-serif;
      background: linear-gradient(135deg, #f4f8fb 0%, #e0eaf8 100%);
      margin: 0; padding: 0;
      display: flex; flex-direction: column; align-items: center;
      min-height: 100vh;
    }
    h1 { 
      margin: 20px 0 6px; 
      color: #1976d2;
      text-align: center;
      font-size: 1.8rem;
    }
    .container {
      width: 95%;
      max-width: 1200px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .topbar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 8px 12px;
      margin: 6px 12px 10px;
      font-size: 14px;
      width: 100%;
    }
    .stat {
      background: #fff;
      border-radius: 8px;
      padding: 6px 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      min-width: 90px;
      text-align: center;
      border-left: 4px solid #1976d2;
      font-size: 14px;
    }
    #status { 
      margin: 6px 0 10px; 
      font-size: 16px; 
      font-weight: bold;
      color: #333;
      text-align: center;
      padding: 8px 16px;
      background: rgba(255,255,255,0.7);
      border-radius: 20px;
    }
    .game-container {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #game-board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      max-width: 1000px;
      width: 100%;
      margin: 10px auto 20px;
    }
    .card {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      color: #fff;
      border-radius: 8px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      user-select: none;
      padding: 8px;
      text-align: center;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .card:active { transform: scale(0.98); }
    .card.flipped {
      background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
      color: #222;
      cursor: default;
    }
    .card.matched {
      background: linear-gradient(135deg, #a5d6a7 0%, #66bb6a 100%);
      color: #2e7d32;
      cursor: default;
      box-shadow: 0 0 15px rgba(76, 175, 80, 0.4);
    }
    .card.mismatched {
      background: linear-gradient(135deg, #ffcdd2 0%, #ef9a9a 100%);
      color: #c62828;
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      backface-visibility: hidden;
      transition: transform 0.6s;
      border-radius: 8px;
      padding: 8px;
      box-sizing: border-box;
    }
    .card-front {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      color: white;
      font-weight: bold;
    }
    .card-back {
      background: white;
      color: #222;
      transform: rotateY(180deg);
      justify-content: center;
      font-size: 13px;
      overflow: auto;
    }
    .card.flipped .card-front {
      transform: rotateY(180deg);
    }
    .card.flipped .card-back {
      transform: rotateY(0deg);
    }
    button {
      margin: 6px 0 4px;
      padding: 10px 16px;
      font-size: 14px;
      border: none;
      background: #1976d2;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }
    button:hover {
      background: #1565c0;
      transform: translateY(-2px);
    }
    button:active { transform: translateY(1px); }
    .controls {
      display: flex; 
      gap: 8px; 
      flex-wrap: wrap; 
      justify-content: center;
      margin-bottom: 6px;
      width: 100%;
    }
    .settings {
      display: flex;
      gap: 8px;
      margin: 10px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .setting-item {
      display: flex;
      align-items: center;
      gap: 5px;
      background: white;
      padding: 6px 10px;
      border-radius: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      font-size: 14px;
    }
    .note { 
      font-size: 12px; 
      color: #555; 
      margin-top: 4px; 
      text-align: center;
      max-width: 600px;
      padding: 0 10px;
    }
    .completed-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 20px 25px;
      border-radius: 12px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.2);
      text-align: center;
      z-index: 100;
      animation: popIn 0.5s ease;
      width: 80%;
      max-width: 300px;
    }
    
    /* ç­”æ¡ˆæ¬„æ¨£å¼ */
    #answer-board {
      width: 100%;
      max-width: 1000px;
      margin: 15px 0;
      padding: 12px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    #answer-board h2 {
      text-align: center;
      color: #1976d2;
      margin-top: 0;
      padding-bottom: 8px;
      border-bottom: 2px solid #1976d2;
      font-size: 1.3rem;
    }
    .answer-pair {
      display: flex;
      margin-bottom: 12px;
      border-bottom: 1px dashed #ccc;
      padding-bottom: 12px;
      align-items: center;
      min-height: 70px;
    }
    .answer-pair:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    .pair-number {
      width: 25px;
      height: 25px;
      background: #1976d2;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 8px;
      flex-shrink: 0;
      opacity: 0;
      transition: opacity 0.5s ease;
      font-size: 12px;
    }
    .pair-number.visible {
      opacity: 1;
    }
    .answer-text, .answer-source {
      flex: 1;
      padding: 8px;
      background: #f9f9f9;
      border-radius: 6px;
      margin: 0 4px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
      position: relative;
      font-size: 13px;
    }
    .answer-text {
      border-left: 4px solid #4caf50;
    }
    .answer-source {
      border-left: 4px solid #2196f3;
    }
    .answer-type {
      position: absolute;
      top: 3px;
      left: 8px;
      font-size: 10px;
      color: #888;
    }
    .answer-placeholder {
      color: #999;
      font-style: italic;
      font-size: 12px;
    }
    
    @keyframes popIn {
      0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 99;
    }
    
    /* æ‰‹æ©Ÿç‰ˆå°ˆç”¨æ¨£å¼ */
    .mobile-controls {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      padding: 10px;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      z-index: 10;
      justify-content: space-around;
    }
    
    .mobile-btn {
      padding: 12px 16px;
      font-size: 14px;
      border: none;
      background: #1976d2;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 1000px) {
      #game-board { grid-template-columns: repeat(4, 1fr); }
    }
    @media (max-width: 800px) {
      #game-board { grid-template-columns: repeat(3, 1fr); }
      .card { height: 90px; font-size: 13px; }
      .answer-pair { flex-direction: column; }
      .answer-text, .answer-source { margin: 5px 0; width: 100%; }
      .pair-number { margin: 0 0 5px 0; }
    }
    @media (max-width: 600px) {
      h1 { font-size: 1.5rem; margin: 15px 0 5px; }
      .topbar { gap: 6px 8px; }
      .stat { 
        min-width: 70px; 
        font-size: 12px; 
        padding: 5px 8px;
      }
      #status { font-size: 14px; padding: 6px 12px; }
      #game-board { 
        grid-template-columns: repeat(2, 1fr); 
        gap: 8px;
      }
      .card { 
        height: 80px; 
        font-size: 12px; 
        border-radius: 6px;
      }
      .card-back { font-size: 11px; }
      .controls { gap: 6px; }
      button { 
        padding: 8px 12px; 
        font-size: 13px;
      }
      .setting-item { font-size: 12px; }
      .note { font-size: 11px; }
      
      /* é¡¯ç¤ºæ‰‹æ©Ÿåº•éƒ¨æ§åˆ¶æ¬„ */
      .mobile-controls {
        display: flex;
      }
      
      /* éš±è—æ¡Œé¢ç‰ˆæ§åˆ¶æŒ‰éˆ• */
      .controls {
        display: none;
      }
      
      /* èª¿æ•´ç­”æ¡ˆæ¬„æ¨£å¼ */
      #answer-board {
        margin-bottom: 70px; /* ç‚ºåº•éƒ¨æ§åˆ¶æ¬„ç•™å‡ºç©ºé–“ */
        padding: 10px;
      }
      #answer-board h2 { font-size: 1.2rem; }
      .answer-text, .answer-source { 
        font-size: 12px; 
        padding: 6px;
      }
    }
    @media (max-width: 400px) {
      #game-board { grid-template-columns: repeat(2, 1fr); }
      .card { 
        height: 70px; 
        font-size: 11px; 
        padding: 5px;
      }
      .card-back { font-size: 10px; }
      .stat { min-width: 60px; font-size: 11px; }
      h1 { font-size: 1.3rem; }
      .mobile-btn { padding: 10px 12px; font-size: 12px; }
    }
    @media (max-width: 350px) {
      .card { height: 65px; }
      #game-board { gap: 6px; }
    }

    .btn { 
      margin: 6px 0 4px;
      padding: 10px 16px;
      font-size: 14px;
      border: none;
      background: #1976d2;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }
    
    /* é˜²æ­¢æ‰‹æ©Ÿä¸Šæ–‡å­—é¸ä¸­ */
    .no-select {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
</head>
<body class="no-select">
  <div class="container">
    <div style="text-align: center; margin: 15px 0; width: 100%;">
 </div>
<h1>ä¸­æ–‡çµ„</h1>
    <h1>301-400åå¥é…å°æ¶ˆæ¶ˆæ¨‚</h1>
    <div class="topbar">
      <div class="stat">è¨ˆæ™‚ï¼š<span id="timer">00:00.0</span></div>
      <div class="stat">é…å°ï¼š<span id="pairs">0</span>/<span id="total-pairs">0</span></div>
      <div class="stat">æœ€ä½³ï¼š<span id="best">â€”</span></div>
    </div>

    <div id="status">è«‹ç¿»é–‹å…©å¼µå¡ç‰Œé€²è¡Œé…å°</div>

    <div class="settings">
      <div class="setting-item">
        <label for="pair-count">éŠæˆ²é›£åº¦:</label>
        <select id="pair-count">
          <option value="5">ç°¡å–® (5çµ„)</option>
          <option value="8">ä¸­ç­‰ (8çµ„)</option>
          <option value="10">å›°é›£ (10çµ„)</option>
        </select>
      </div>
    </div>

    <div class="controls">
      <button id="btn-home" class="btn">ä¸»é </button>
      <button id="btn-new" class="btn">é‡æ–°é–‹å§‹</button>
      <button id="btn-pause" class="btn">æš«åœ</button>
      <button id="btn-resume" class="btn" style="display:none;">ç¹¼çºŒ</button>
    </div>
    <div class="note">æç¤ºï¼šç¿»ç‰Œé–‹å§‹å³è¨ˆæ™‚ï¼Œå…¨éƒ¨é…å°å®Œæˆè‡ªå‹•åœæ­¢ã€‚é…å°æˆåŠŸæ™‚å¡ç‰‡æœƒç§»å‹•åˆ°ä¸‹æ–¹ç­”æ¡ˆæ¬„ã€‚</div>

    <div class="game-container">
      <div id="game-board"></div>
    </div>
    
    <!-- ç­”æ¡ˆæ¬„ -->
    <div id="answer-board">
      <h2>ç­”æ¡ˆæ¬„</h2>
      <div id="answer-container"></div>
    </div>
  </div>
  
  <!-- æ‰‹æ©Ÿç‰ˆåº•éƒ¨æ§åˆ¶æ¬„ -->
  <div class="mobile-controls">
    <button id="mobile-home" class="mobile-btn">ä¸»é </button>
    <button id="mobile-new" class="mobile-btn">é‡æ–°é–‹å§‹</button>
    <button id="mobile-pause" class="mobile-btn">æš«åœ</button>
    <button id="mobile-resume" class="mobile-btn" style="display:none;">ç¹¼çºŒ</button>
  </div>


  <script>
    // å®Œæ•´çš„åå¥åˆ—è¡¨ï¼ˆå¸¶æœ‰åºè™Ÿï¼‰
    const quotes = [
    
{"id": 301, "text": "ä¸æ˜¯èŠ±ä¸­åæ„›èŠï¼Œæ­¤èŠ±é–‹ç›¡æ›´ç„¡èŠ±ã€‚", "source": "å…ƒç¨¹ã€ŠèŠèŠ±ã€‹"},
{ "id": 302, "text": "æ˜¥ç¨®ä¸€ç²’ç²Ÿï¼Œç§‹æ”¶è¬é¡†å­ã€‚", "source": "æç´³ã€Šæ†«è¾²ã€‹" },
{ "id": 303, "text": "å§‘è˜‡åŸå¤–å¯’å±±å¯ºï¼Œå¤œåŠé˜è²åˆ°å®¢èˆ¹ã€‚", "source": "å¼µç¹¼ã€Šæ¥“æ©‹å¤œæ³Šã€‹" },
{ "id": 304, "text": "æŸ´é–€èçŠ¬å ï¼Œé¢¨é›ªå¤œæ­¸äººã€‚", "source": "åŠ‰é•·å¿ã€Šé€¢é›ªå®¿èŠ™è“‰å±±ä¸»äººã€‹" },
{ "id": 305, "text": "å‹¸å›è«æƒœé‡‘ç¸·è¡£ï¼Œå‹¸å›æƒœå–å°‘å¹´æ™‚ã€‚èŠ±é–‹å ªæŠ˜ç›´é ˆæŠ˜ï¼Œè«å¾…ç„¡èŠ±ç©ºæŠ˜æã€‚", "source": "æœç§‹å¨˜ã€Šé‡‘ç¸·è¡£ã€‹" },
{ "id": 306, "text": "æºªé›²åˆèµ·æ—¥æ²‰é–£ï¼Œå±±é›¨æ¬²ä¾†é¢¨æ»¿æ¨“ã€‚", "source": "è¨±æ¸¾ã€Šå’¸é™½åŸæ±æ¨“ã€‹" },
{ "id": 307, "text": "è¥¿å¡å±±å‰ç™½é·ºé£›ï¼Œæ¡ƒèŠ±æµæ°´é±–é­šè‚¥ã€‚", "source": "å¼µå¿—å’Œã€Šæ¼æ­Œå­ã€‹" },
{ "id": 308, "text": "åˆ¥æ™‚å®¹æ˜“è¦‹æ™‚é›£ã€‚æµæ°´è½èŠ±æ˜¥å»ä¹Ÿï¼Œå¤©ä¸Šäººé–“ã€‚", "source": "æç…œã€Šæµªæ·˜æ²™ã€‹" },
{ "id": 309, "text": "å…ˆå¤©ä¸‹ä¹‹æ†‚è€Œæ†‚ï¼Œå¾Œå¤©ä¸‹ä¹‹æ¨‚è€Œæ¨‚ã€‚", "source": "èŒƒä»²æ·¹ã€Šå²³é™½æ¨“è¨˜ã€‹" },
{ "id": 310, "text": "é†‰ç¿ä¹‹æ„ä¸åœ¨é…’ï¼Œåœ¨ä¹å±±æ°´ä¹‹é–“ä¹Ÿã€‚", "source": "æ­é™½ä¿®ã€Šé†‰ç¿äº­è¨˜ã€‹" },
{ "id": 311, "text": "æ†‚å‹å¯ä»¥èˆˆåœ‹ï¼Œé€¸è±«å¯ä»¥äº¡èº«ã€‚", "source": "æ­é™½ä¿®ã€Šäº”ä»£å²ä¼¶å®˜å‚³åºã€‹" },
{ "id": 312, "text": "è¡£å¸¶æ¼¸å¯¬çµ‚ä¸æ‚”ï¼Œç‚ºä¼Šæ¶ˆå¾—äººæ†”æ‚´ã€‚", "source": "æŸ³æ°¸ã€Šé¢¨æ –æ¢§ã€‹" },
{ "id": 313, "text": "å¤šæƒ…è‡ªå¤å‚·é›¢åˆ¥ã€‚æ›´é‚£å ªï¼Œå†·è½æ¸…ç§‹ç¯€ã€‚", "source": "æŸ³æ°¸ã€Šé›¨éœ–éˆ´ã€‹" },
{ "id": 314, "text": "ä»Šå®µé…’é†’ä½•è™•ï¼Œæ¥ŠæŸ³å²¸ã€æ›‰é¢¨æ®˜æœˆã€‚", "source": "æŸ³æ°¸ã€Šé›¨éœ–éˆ´ã€‹" },
{ "id": 315, "text": "é‘’å‰ä¸–ä¹‹èˆˆè¡°ï¼Œè€ƒç•¶ä»Šä¹‹å¾—å¤±ã€‚", "source": "å¸é¦¬å…‰ã€Šè³‡æ²»é€šé‘’ã€‹" },
{ "id": 316, "text": "å…¼è½å‰‡æ˜ï¼Œåä¿¡ï¼ˆè½ï¼‰å‰‡æš—ã€‚", "source": "å¸é¦¬å…‰ã€Šè³‡æ²»é€šé‘’ã€‹" },
{ "id": 317, "text": "ç”±å„‰å…¥å¥¢æ˜“ï¼Œç”±å¥¢å…¥å„‰é›£ã€‚", "source": "å¸é¦¬å…‰ã€Šè¨“å„‰ç¤ºåº·ã€‹" },
{ "id": 318, "text": "æ˜¥é¢¨åˆç¶ æ±Ÿå—å²¸ï¼Œæ˜æœˆä½•æ™‚ç…§æˆ‘é‚„ï¼Ÿ", "source": "ç‹å®‰çŸ³ã€Šæ³Šèˆ¹ç“œå·ã€‹" },
{ "id": 319, "text": "ä¸ç•æµ®é›²é®æœ›çœ¼ï¼Œåªç·£èº«åœ¨æœ€é«˜å±¤ã€‚", "source": "ç‹å®‰çŸ³ã€Šç™»é£›ä¾†å³°ã€‹" },
{ "id": 320, "text": "åƒé–€è¬æˆ¶æ›ˆæ›ˆæ—¥ï¼Œç¸½æŠŠæ–°æ¡ƒæ›èˆŠç¬¦ã€‚", "source": "ç‹å®‰çŸ³ã€Šå…ƒæ—¥ã€‹" },
{ "id": 321, "text": "è·ç›¡å·²ç„¡æ“é›¨è“‹ï¼ŒèŠæ®˜çŒ¶æœ‰å‚²éœœæã€‚", "source": "è˜‡è»¾ã€Šè´ˆåŠ‰æ™¯æ–‡ã€‹" },
{ "id": 322, "text": "å¤§å‹‡è‹¥æ€¯ï¼Œå¤§æ™ºè‹¥æ„šã€‚", "source": "è˜‡è»¾ã€Šè³€æ­é™½å°‘å¸«è‡´ä»•å•Ÿã€‹" },
{ "id": 323, "text": "å¤§æ±Ÿæ±å»ï¼Œæµªæ·˜ç›¡ã€åƒå¤é¢¨æµäººç‰©ã€‚", "source": "è˜‡è»¾ã€Šå¿µå¥´å¬Œãƒ»èµ¤å£æ‡·å¤ã€‹" },
{ "id": 324, "text": "æ±Ÿå±±å¦‚ç•«ï¼Œä¸€æ™‚å¤šå°‘è±ªå‚‘ã€‚", "source": "è˜‡è»¾ã€Šå¿µå¥´å¬Œãƒ»èµ¤å£æ‡·å¤ã€‹" },
{ "id": 325, "text": "æä¸ŠæŸ³ç¶¿å¹åˆå°‘ï¼Œå¤©æ¶¯ä½•è™•ç„¡èŠ³è‰ã€‚", "source": "è˜‡è»¾ã€Šè¶æˆ€èŠ±ãƒ»æ˜¥æ™¯ã€‹" },
{ "id": 326, "text": "æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­ï¼Œæ·¡å¦æ¿ƒæŠ¹å…©ç›¸å®œã€‚", "source": "è˜‡è»¾ã€Šé£²æ¹–ä¸Šåˆæ™´å¾Œé›¨ã€‹" },
{ "id": 327, "text": "äººæœ‰æ‚²æ­¡é›¢åˆï¼Œæœˆæœ‰é™°æ™´åœ“ç¼ºã€‚", "source": "è˜‡è»¾ã€Šæ°´èª¿æ­Œé ­ã€‹" },
{ "id": 328, "text": "ä½†é¡˜äººé•·ä¹…ï¼Œåƒé‡Œå…±å¬‹å¨Ÿã€‚", "source": "è˜‡è»¾ã€Šæ°´èª¿æ­Œé ­ã€‹" },
{ "id": 329, "text": "ä¸è­˜å»¬å±±çœŸé¢ç›®ï¼Œåªç·£èº«åœ¨æ­¤å±±ä¸­ã€‚", "source": "è˜‡è»¾ã€Šé¡Œè¥¿æ—å£ã€‹" },
{ "id": 330, "text": "ç«¹å¤–æ¡ƒèŠ±ä¸‰å…©æï¼Œæ˜¥æ±Ÿæ°´æš–é´¨å…ˆçŸ¥ã€‚", "source": "è˜‡è»¾ã€Šæƒ å´‡æ˜¥æ±Ÿæ™šæ™¯ã€‹" },
{ "id": 331, "text": "æœˆå‡ºæ–¼æ±å±±ä¹‹ä¸Šï¼Œå¾˜å¾Šæ–¼æ–—ç‰›ä¹‹é–“ã€‚", "source": "è˜‡è»¾ã€Šå‰èµ¤å£è³¦ã€‹" },
{ "id": 332, "text": "åœ’å›¿ä¹‹èˆˆå»¢ï¼Œæ´›é™½ç››è¡°ä¹‹å€™ä¹Ÿã€‚", "source": "ææ ¼é£›ã€Šæ›¸ã€ˆæ´›é™½ååœ’è¨˜ã€‰å¾Œã€‹" },
{ "id": 333, "text": "ä¸€æ˜¥é­šé›ç„¡æ¶ˆæ¯ï¼Œåƒé‡Œé—œå±±å‹å¤¢é­‚ã€‚", "source": "ç§¦è§€ã€Šé·“é´£å¤©ãƒ»æ˜¥é–¨ã€‹" },
{ "id": 334, "text": "å…©æƒ…è‹¥æ˜¯ä¹…é•·æ™‚ï¼Œåˆè±ˆåœ¨æœæœæš®æš®ã€‚", "source": "ç§¦è§€ã€Šéµ²æ©‹ä»™ã€‹" },
{ "id": 335, "text": "å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œæ¿¯æ¸…æ¼£è€Œä¸å¦–ã€‚", "source": "å‘¨æ•¦é ¤ã€Šæ„›è“®èªªã€‹" },
{ "id": 336, "text": "è«é“ä¸éŠ·é­‚ï¼Œç°¾æ²è¥¿é¢¨ï¼Œäººæ¯”é»ƒèŠ±ç˜¦ã€‚", "source": "ææ¸…ç…§ã€Šé†‰èŠ±é™°ã€‹" },
{ "id": 337, "text": "åªæé›™æºªèˆ´è‰‹èˆŸï¼Œè¼‰ä¸å‹•è¨±å¤šæ„ã€‚", "source": "ææ¸…ç…§ã€Šæ­¦é™µæ˜¥ã€‹" },
{ "id": 338, "text": "èŠ±è‡ªé£„é›¶æ°´è‡ªæµï¼Œä¸€ç¨®ç›¸æ€ï¼Œå…©è™•é–‘æ„ã€‚æ­¤æƒ…ç„¡è¨ˆå¯æ¸…é™¤ï¼Œæ‰ä¸‹çœ‰é ­ï¼Œå»ä¸Šå¿ƒé ­ã€‚", "source": "ææ¸…ç…§ã€Šä¸€å‰ªæ¢…ã€‹" },
{ "id": 339, "text": "å°‹å°‹è¦“è¦“ï¼Œå†·å†·æ¸…æ¸…ï¼Œæ·’æ·’æ…˜æ…˜æˆšæˆšã€‚", "source": "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹" },
{ "id": 340, "text": "ç”Ÿç•¶ä½œäººå‚‘ï¼Œæ­»äº¦ç‚ºé¬¼é›„ã€‚", "source": "ææ¸…ç…§ã€Šå¤æ—¥çµ•å¥ã€‹" },
{ "id": 341, "text": "ç„¡æ„è‹¦çˆ­æ˜¥ï¼Œä¸€ä»»ç¾¤èŠ³å¦’ã€‚", "source": "é™¸éŠã€Šåœç®—å­ãƒ»è© æ¢…ã€‹" },
{ "id": 342, "text": "åƒµå§å­¤æ‘ä¸è‡ªå“€ï¼Œå°šæ€ç‚ºåœ‹æˆè¼ªå°ã€‚å¤œé—Œè‡¥è½é¢¨å¹é›¨ï¼Œéµé¦¬å†°æ²³å…¥å¤¢ä¾†ã€‚", "source": "é™¸éŠã€Šåä¸€æœˆå››æ—¥é¢¨é›¨å¤§ä½œã€‹" },
{ "id": 343, "text": "ç´™ä¸Šå¾—ä¾†çµ‚è¦ºæ·ºï¼Œçµ¶çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚", "source": "é™¸éŠã€Šå†¬å¤œè®€æ›¸ç¤ºå­è¿ã€‹" },
{ "id": 344, "text": "æ–‡ç« æœ¬å¤©æˆï¼Œå¦™æ‰‹å¶å¾—ä¹‹ã€‚", "source": "é™¸éŠã€Šæ–‡ç« ã€‹" },
{ "id": 345, "text": "å±±é‡æ°´è¤‡ç–‘ç„¡è·¯ï¼ŒæŸ³æš—èŠ±æ˜åˆä¸€æ‘ã€‚", "source": "é™¸éŠã€ŠéŠå±±è¥¿æ‘ã€‹" },
{ "id": 346, "text": "å‡ºå¸«ä¸€è¡¨çœŸåä¸–ï¼Œåƒè¼‰èª°å ªä¼¯ä»²é–“ï¼", "source": "é™¸éŠã€Šæ›¸æ†¤ã€‹" },
{ "id": 347, "text": "ç–å½±æ©«æ–œæ°´æ¸…æ·ºï¼Œæš—é¦™æµ®å‹•æœˆé»ƒæ˜ã€‚", "source": "æ—é€‹ã€Šå±±åœ’å°æ¢…ã€‹" },
{ "id": 348, "text": "å°è·æ‰éœ²å°–å°–è§’ï¼Œæ—©æœ‰èœ»èœ“ç«‹ä¸Šé ­ã€‚", "source": "æ¥Šè¬é‡Œã€Šå°æ± ã€‹" },
{ "id": 349, "text": "ç•¢ç«Ÿè¥¿æ¹–å…­æœˆä¸­ï¼Œé¢¨å…‰ä¸èˆ‡å››æ™‚åŒã€‚", "source": "æ¥Šè¬é‡Œã€Šæ›‰å‡ºå‡ˆæ…ˆå¯ºé€æ—å­æ–¹ã€‹" },
{ "id": 350, "text": "æ¥å¤©è“®è‘‰ç„¡çª®ç¢§ï¼Œæ˜ æ—¥è·èŠ±åˆ¥æ¨£ç´…ã€‚", "source": "æ¥Šè¬é‡Œã€Šæ›‰å‡ºå‡ˆæ…ˆå¯ºé€æ—å­æ–¹ã€‹" },
{ "id": 351, "text": "æœˆå­å½å½ç…§ä¹å·ï¼Œå¹¾å®¶æ­¡æ¨‚å¹¾å®¶æ„ã€‚", "source": "æ¥Šè¬é‡Œã€Šç«¹ææ­Œã€‹" },
{ "id": 352, "text": "æ˜¥èŠ±ç§‹æœˆå†¬å†°é›ªï¼Œä¸è½é™³è¨€åªè½å¤©ã€‚", "source": "æ¥Šè¬é‡Œã€Šè®€å¼µæ–‡æ½›è©©ã€‹" },
{ "id": 353, "text": "ç¨»èŠ±é¦™é‡Œèªªè±å¹´ï¼Œè½å–è›™è²ä¸€ç‰‡ã€‚", "source": "è¾›æ£„ç–¾ã€Šè¥¿æ±Ÿæœˆãƒ»å¤œè¡Œé»ƒæ²™é“ä¸­ã€‹" },
{ "id": 354, "text": "æ¥šå¤©åƒé‡Œæ¸…ç§‹ï¼Œæ°´éš¨å¤©å»ç§‹ç„¡éš›ã€‚", "source": "è¾›æ£„ç–¾ã€Šæ°´é¾åŸãƒ»ç™»å»ºåº·è³å¿ƒäº­ã€‹" },
{ "id": 355, "text": "çœ¾é‡Œå°‹ä»–åƒç™¾åº¦ã€‚é©€ç„¶å›é¦–ï¼Œé‚£äººå»åœ¨ã€ç‡ˆç«é—ŒçŠè™•ã€‚", "source": "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆãƒ»å…ƒå¤•ã€‹" },
{ "id": 356, "text": "é’å±±é®ä¸ä½ï¼Œç•¢ç«Ÿæ±æµå»ã€‚", "source": "è¾›æ£„ç–¾ã€Šè©è–©è »ãƒ»æ›¸æ±Ÿè¥¿é€ å£å£ã€‹" },
{ "id": 357, "text": "äºŒåå››æ©‹ä»åœ¨ï¼Œæ³¢å¿ƒè•©ã€å†·æœˆç„¡è²ã€‚", "source": "å§œå¤”ã€Šæšå·æ…¢ã€‹" },
{ "id": 358, "text": "ä¸€èªå¤©ç„¶è¬å¤æ–°ï¼Œè±ªè¯è½ç›¡è¦‹çœŸæ·³ã€‚", "source": "å…ƒå¥½å•ã€Šè«–è©©ä¸‰åé¦–ã€‹" },
{ "id": 359, "text": "æ—é–“æ–°ç¶ ä¸€é‡é‡ï¼Œå°è•¾æ·±è—æ•¸é»ç´…ã€‚", "source": "å…ƒå¥½å•ã€ŠåŒå…’è¼©è³¦æœªé–‹æµ·æ£ ã€‹" },
{ "id": 360, "text": "è‡£å¿ƒä¸€ç‰‡ç£é‡çŸ³ï¼Œä¸æŒ‡å—æ–¹ä¸è‚¯ä¼‘ã€‚", "source": "æ–‡å¤©ç¥¥ã€Šæšå­æ±Ÿã€‹" },
{ "id": 361, "text": "å±±æ²³ç ´ç¢é¢¨é£„çµ®ï¼Œèº«ä¸–æµ®æ²‰é›¨æ‰“èã€‚", "source": "æ–‡å¤©ç¥¥ã€Šéé›¶ä¸æ´‹ã€‹" },
{ "id": 362, "text": "äººç”Ÿè‡ªå¤èª°ç„¡æ­»ï¼Œç•™å–ä¸¹å¿ƒç…§æ±—é’ã€‚", "source": "æ–‡å¤©ç¥¥ã€Šéé›¶ä¸æ´‹ã€‹" },
{ "id": 363, "text": "ç„¡å¯å¥ˆä½•èŠ±è½å»ï¼Œä¼¼æ›¾ç›¸è­˜ç‡•æ­¸ä¾†ã€‚", "source": "æ™æ®Šã€Šæµ£æºªæ²™ã€‹" },
{ "id": 364, "text": "æ˜¥è‰²æ»¿åœ’é—œä¸ä½ï¼Œä¸€æç´…æå‡ºç‰†ä¾†ã€‚", "source": "è‘‰ç´¹ç¿ã€Šæ¸¸åœ’ä¸å€¼ã€‹" },
{ "id": 365, "text": "å³ä»¥å…¶äººä¹‹é“ï¼Œé‚„æ²»å…¶äººä¹‹èº«ã€‚", "source": "æœ±ç†¹ã€Šä¸­åº¸é›†è¨»ãƒ»åä¸‰ç« ã€‹" },
{ "id": 366, "text": "ç­‰é–’è­˜å¾—æ±é¢¨é¢ï¼Œè¬ç´«åƒç´…ç¸½æ˜¯æ˜¥ã€‚", "source": "æœ±ç†¹ã€Šæ˜¥æ—¥ã€‹" },
{ "id": 367, "text": "å•æ¸ é‚£å¾—æ¸…å¦‚è¨±ï¼Ÿç‚ºæœ‰æºé ­æ´»æ°´ä¾†ã€‚", "source": "æœ±ç†¹ã€Šè§€æ›¸æœ‰æ„Ÿã€‹" },
{ "id": 368, "text": "è®€æ›¸åƒéï¼Œå…¶ç¾©è‡ªè¦‹ã€‚", "source": "æœ±ç†¹ã€Šç†Ÿè®€ç²¾æ€ã€‹" },
{ "id": 369, "text": "ä¸‰ååŠŸåå¡µèˆ‡åœŸï¼Œå…«åƒé‡Œè·¯é›²å’Œæœˆã€‚", "source": "å²³é£›ã€Šæ»¿æ±Ÿç´…ã€‹" },
{ "id": 370, "text": "ä¸è¦äººèª‡é¡è‰²å¥½ï¼Œåªç•™æ¸…æ°£æ»¿ä¹¾å¤ã€‚", "source": "ç‹å†•ã€Šå¢¨æ¢…ã€‹" },
{ "id": 371, "text": "è‘—æ„æ ½èŠ±èŠ±ä¸ç™¼ï¼Œç„¡æ„æ’æŸ³æŸ³æˆè”­ã€‚", "source": "é—œæ¼¢å¿ã€ŠåŒ…å¾…åˆ¶æ™ºæ–¬é­¯é½‹éƒã€‹" },
{ "id": 372, "text": "æˆä¹Ÿè•­ä½•ï¼Œæ•—ä¹Ÿè•­ä½•ï¼Œé†‰äº†ç”±ä»–ã€‚", "source": "é¦¬è‡´é ã€Šé›™èª¿ãƒ»èŸ¾å®®æ›²ãƒ»å˜†ä¸–ã€‹" },
{ "id": 373, "text": "ç¢§é›²å¤©ï¼Œé»ƒèŠ±åœ°ï¼Œè¥¿é¢¨ç·Šï¼ŒåŒ—é›å—é£›ã€‚æ›‰ä¾†èª°æŸ“éœœæ—é†‰ï¼Ÿç¸½æ˜¯é›¢äººæ·šã€‚", "source": "ç‹å¯¦ç”«ã€Šè¥¿å¢è¨˜ã€‹" },
{ "id": 374, "text": "ä¸€è¨€æ—¢å‡ºï¼Œé§Ÿé¦¬é›£è¿½ã€‚", "source": "æå£½å¿ã€Šä¼å“¡å¹ç°«ã€‹" },
{ "id": 375, "text": "ä¸æ˜¯ä¸€ç•ªå¯’å¾¹éª¨ï¼Œæ€å¾—æ¢…èŠ±æ’²é¼»é¦™ã€‚", "source": "é«˜æ˜ã€Šçµç¶è¨˜ã€‹" },
{ "id": 376, "text": "åå¹´çª—ä¸‹ç„¡äººå•ï¼Œä¸€èˆ‰æˆåå¤©ä¸‹çŸ¥ã€‚", "source": "é«˜æ˜ã€Šçµç¶è¨˜ã€‹" },
{ "id": 377, "text": "è‰¯è¾°ç¾æ™¯å¥ˆä½•å¤©ï¼Œè³å¿ƒæ¨‚äº‹èª°å®¶é™¢ï¼Ÿ", "source": "æ¹¯é¡¯ç¥–ã€Šç‰¡ä¸¹äº­ã€‹" },
{ "id": 378, "text": "é‡‘ç‰å…¶å¤–ï¼Œæ•—çµ®å…¶ä¸­ã€‚", "source": "åŠ‰åŸºã€Šè³£æŸ‘è€…è¨€ã€‹" },
{ "id": 379, "text": "äººé€¢å–œäº‹ç²¾ç¥çˆ½ï¼Œæœˆåˆ°ä¸­ç§‹åˆ†å¤–æ˜ã€‚", "source": "é¦®å¤¢é¾ã€Šå¤ä»Šå°èªªã€‹" },
{ "id": 380, "text": "è§€æ£‹ä¸èªçœŸå›å­ï¼ŒæŠŠé…’å¤šè¨€æ˜¯å°äººã€‚", "source": "é¦®å¤¢é¾ã€Šé†’ä¸–æ†è¨€ã€‹" },
{ "id": 381, "text": "ç•™å¾—é’å±±åœ¨ï¼Œä¸æ€•æ²’æŸ´ç‡’ã€‚", "source": "å‡Œæ¿›åˆã€Šåˆåˆ»æ‹æ¡ˆé©šå¥‡ã€‹" },
{ "id": 382, "text": "è¬€äº‹åœ¨äººï¼Œæˆäº‹åœ¨å¤©ã€‚", "source": "ç¾…è²«ä¸­ã€Šä¸‰åœ‹æ¼”ç¾©ã€‹" },
{ "id": 383, "text": "å‘¨éƒå¦™è¨ˆå®‰å¤©ä¸‹ï¼Œè³ äº†å¤«äººåˆæŠ˜å…µã€‚", "source": "ç¾…è²«ä¸­ã€Šä¸‰åœ‹æ¼”ç¾©ã€‹" },
{ "id": 384, "text": "æ˜æ—¥å¾©æ˜æ—¥ï¼Œæ˜æ—¥ä½•å…¶å¤šã€‚æˆ‘ç”Ÿå¾…æ˜æ—¥ï¼Œè¬äº‹æˆè¹‰è·ã€‚", "source": "éŒ¢ç¦ã€Šæ˜æ—¥æ­Œã€‹" },
{ "id": 385, "text": "ç²‰èº«ç¢éª¨æ¸¾ä¸æ€•ï¼Œè¦ç•™æ¸…ç™½åœ¨äººé–“ã€‚", "source": "äºè¬™ã€ŠçŸ³ç°åŸã€‹" },
{ "id": 386, "text": "ä½†é¡˜è’¼ç”Ÿä¿±é£½æš–ï¼Œä¸è¾­è¾›è‹¦å‡ºå±±æ—ã€‚", "source": "äºè¬™ã€Šè© ç…¤ç‚­ã€‹"},
{ "id": 387, "text": "ä¸–äº‹æ´æ˜çš†å­¸å•ï¼Œäººæƒ…ç·´é”å³æ–‡ç« ã€‚", "source": "æ›¹é›ªèŠ¹ã€Šç´…æ¨“å¤¢ã€‹" },
{ "id": 388, "text": "å‹å¦‚ä½œç•«é ˆæ±‚æ·¡ï¼Œå±±ä¼¼è«–æ–‡ä¸å–œå¹³ã€‚", "source": "ç¿ç…§ã€Šå°šæ¹–æ™šæ­¥ã€‹" },
{ "id": 389, "text": "åƒç£¨è¬æ“Šé‚„å …å‹ï¼Œä»»çˆ¾æ±è¥¿å—åŒ—é¢¨ã€‚", "source": "é„­ç‡®ã€Šç«¹çŸ³ã€‹" },
{ "id": 390, "text": "æµ·ç´ç™¾å·ï¼Œæœ‰å®¹ä¹ƒå¤§ï¼›å£ç«‹åƒä»ï¼Œç„¡æ¬²å‰‡å‰›ã€‚", "source": "æ—å‰‡å¾ãƒ»å°è¯" },
{ "id": 391, "text": "å¤©ä¸‹èˆˆäº¡ï¼ŒåŒ¹å¤«æœ‰è²¬ã€‚", "source": "é¡§ç‚æ­¦ã€Šæ—¥çŸ¥éŒ„ã€‹" },
{ "id": 392, "text": "è½ç´…ä¸æ˜¯ç„¡æƒ…ç‰©ï¼ŒåŒ–ä½œæ˜¥æ³¥æ›´è­·èŠ±ã€‚", "source": "é¾”è‡ªçã€Šå·±äº¥é›œè©©ã€‹" },
{ "id": 393, "text": "ä¹å·ç”Ÿæ°£æƒé¢¨é›·ï¼Œè¬é¦¬é½Šå–‘ç©¶å¯å“€ã€‚", "source": "é¾”è‡ªçã€Šå·±äº¥é›œè©©ã€‹" },
{ "id": 394, "text": "æˆ‘å‹¸å¤©å…¬é‡æŠ–æ“»ï¼Œä¸æ‹˜ä¸€æ ¼é™äººæ‰ã€‚", "source": "é¾”è‡ªçã€Šå·±äº¥é›œè©©ã€‹" },
{ "id": 395, "text": "æˆ‘è‡ªæ©«åˆ€å‘å¤©ç¬‘ï¼Œå»ç•™è‚è†½å…©å´‘å´™ã€‚", "source": "è­šå—£åŒã€Šç„ä¸­é¡Œå£ã€‹" },
{ "id": 396, "text": "æ±Ÿå±±ä»£æœ‰æ‰äººå‡ºï¼Œå„é ˜é¢¨é¨·æ•¸ç™¾å¹´ã€‚", "source": "è¶™ç¿¼ã€Šè«–è©©äº”é¦–ã€‹" },
{ "id": 397, "text": "æ©«çœ‰å†·å°åƒå¤«æŒ‡ï¼Œä¿¯é¦–ç”˜ç‚ºå­ºå­ç‰›ã€‚", "source": "é­¯è¿…ã€Šè‡ªå˜²ã€‹" },
{ "id": 398, "text": "å¯„æ„å¯’æ˜Ÿèƒä¸å¯Ÿï¼Œæˆ‘ä»¥æˆ‘è¡€è–¦è»’è½…ã€‚", "source": "é­¯è¿…ã€Šè‡ªé¡Œå°åƒã€‹" },
{ "id": 399, "text": "ä¿ä¹Ÿä¸çˆ­æ˜¥ï¼ŒåªæŠŠæ˜¥ä¾†å ±ã€‚å¾…åˆ°å±±èŠ±çˆ›æ¼«æ™‚ï¼Œå¥¹åœ¨å¢ä¸­ç¬‘ã€‚", "source": "æ¯›æ¾¤æ±ã€Šåœç®—å­ãƒ»è© æ¢…ã€‹" },
{ "id": 400, "text": "å¤©è‹¥æœ‰æƒ…å¤©äº¦è€ï¼Œäººé–“æ­£é“æ˜¯æ»„æ¡‘ã€‚", "source": "æ¯›æ¾¤æ±ã€Šä¸ƒå¾‹ãƒ»äººæ°‘è§£æ”¾è»å é ˜å—äº¬ã€‹" }
     ];

    // éŠæˆ²ç‹€æ…‹
    let cards = [];
    let firstCard = null, secondCard = null;
    let lockBoard = false;
    let matchedCount = 0;
    let totalPairs = 5; // é è¨­5çµ„
    let selectedQuotes = []; // ç•¶å‰é¸ä¸­çš„åå¥

    // è¨ˆæ™‚å™¨ç‹€æ…‹
    let timerInterval = null;
    let startTime = 0;
    let elapsed = 0;
    let running = false;
    let gameStarted = false;
    let isPaused = false;

    const boardEl = document.getElementById('game-board');
    const statusEl = document.getElementById('status');
    const timerEl = document.getElementById('timer');
    const bestEl = document.getElementById('best');
    const pairsEl = document.getElementById('pairs');
    const totalPairsEl = document.getElementById('total-pairs');
    const btnNew = document.getElementById('btn-new');
    const btnPause = document.getElementById('btn-pause');
    const btnResume = document.getElementById('btn-resume');
    const btnHome = document.getElementById('btn-home');
    const pairCountSelect = document.getElementById('pair-count');
    const answerContainerEl = document.getElementById('answer-container');
    
    // æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•
    const mobileNew = document.getElementById('mobile-new');
    const mobilePause = document.getElementById('mobile-pause');
    const mobileResume = document.getElementById('mobile-resume');
    const mobileHome = document.getElementById('mobile-home');

    // å·¥å…·ï¼šæ´—ç‰Œ
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // å–éš¨æ©Ÿåå¥çµ„
    function pickRandomQuotes(num) {
      // ç¢ºä¿ä¸è¶…éå¯ç”¨åå¥æ•¸é‡
      const availableQuotes = [...quotes];
      if (num > availableQuotes.length) {
        num = availableQuotes.length;
      }
      
      const indices = shuffle([...Array(availableQuotes.length).keys()]);
      return indices.slice(0, num).map(i => availableQuotes[i]);
    }

    // åˆå§‹åŒ–ç­”æ¡ˆæ¬„
    function initAnswerBoard() {
      answerContainerEl.innerHTML = '';
      selectedQuotes.forEach((quote) => {
        const pairDiv = document.createElement('div');
        pairDiv.className = 'answer-pair';
        pairDiv.id = `answer-pair-${quote.id}`;
        
        // æ·»åŠ åºè™Ÿï¼ˆåˆå§‹éš±è—ï¼‰
        const numberDiv = document.createElement('div');
        numberDiv.className = 'pair-number';
        numberDiv.textContent = quote.id;
        numberDiv.style.display = 'none'; // åˆå§‹éš±è—
        
        const textDiv = document.createElement('div');
        textDiv.className = 'answer-text';
        textDiv.innerHTML = '<span class="answer-placeholder">ç­‰å¾…é…å°...</span>';
        const textType = document.createElement('div');
        textType.className = 'answer-type';
        textType.textContent = 'åå¥';
        textDiv.appendChild(textType);
        
        const sourceDiv = document.createElement('div');
        sourceDiv.className = 'answer-source';
        sourceDiv.innerHTML = '<span class="answer-placeholder">ç­‰å¾…é…å°...</span>';
        const sourceType = document.createElement('div');
        sourceType.className = 'answer-type';
        sourceType.textContent = 'å‡ºè™•';
        sourceDiv.appendChild(sourceType);
        
        pairDiv.appendChild(numberDiv);
        pairDiv.appendChild(textDiv);
        pairDiv.appendChild(sourceDiv);
        answerContainerEl.appendChild(pairDiv);
      });
    }

    // æ›´æ–°ç­”æ¡ˆæ¬„
    function updateAnswerBoard(quoteId, text, source) {
      const pairDiv = document.getElementById(`answer-pair-${quoteId}`);
      if (pairDiv) {
        // é¡¯ç¤ºåºè™Ÿ
        const numberDiv = pairDiv.querySelector('.pair-number');
        numberDiv.style.display = 'flex';
        setTimeout(() => {
          numberDiv.classList.add('visible');
        }, 10);
        
        const textDiv = pairDiv.querySelector('.answer-text');
        const sourceDiv = pairDiv.querySelector('.answer-source');
        
        textDiv.innerHTML = text;
        const textType = document.createElement('div');
        textType.className = 'answer-type';
        textType.textContent = 'åå¥';
        textDiv.appendChild(textType);
        
        sourceDiv.innerHTML = source;
        const sourceType = document.createElement('div');
        sourceType.className = 'answer-type';
        sourceType.textContent = 'å‡ºè™•';
        sourceDiv.appendChild(sourceType);
        
        // æ·»åŠ å‹•ç•«æ•ˆæœ
        textDiv.style.animation = 'none';
        sourceDiv.style.animation = 'none';
        setTimeout(() => {
          textDiv.style.animation = 'popIn 0.5s ease';
          sourceDiv.style.animation = 'popIn 0.5s ease';
        }, 10);
      }
    }

    // è¨ˆæ™‚å™¨ï¼šæ ¼å¼åŒ–
    function formatTime(ms) {
      const totalMs = Math.max(0, ms | 0);
      const totalSec = Math.floor(totalMs / 1000);
      const min = Math.floor(totalSec / 60);
      const sec = totalSec % 60;
      const deci = Math.floor((totalMs % 1000) / 100);
      const mm = String(min).padStart(2, '0');
      const ss = String(sec).padStart(2, '0');
      return `${mm}:${ss}.${deci}`;
    }

    // è¨ˆæ™‚å™¨ï¼šæ›´æ–°ç•«é¢
    function updateTimerDisplay() {
      timerEl.textContent = formatTime(elapsed);
    }

    // è¨ˆæ™‚å™¨ï¼šé–‹å§‹
    function startTimer() {
      if (running) return;
      running = true;
      gameStarted = true; // ç¢ºä¿éŠæˆ²ç‹€æ…‹æ¨™è¨˜ç‚ºå·²é–‹å§‹
      startTime = performance.now();
      timerInterval = setInterval(() => {
        const now = performance.now();
        elapsed += (now - startTime);
        startTime = now;
        updateTimerDisplay();
      }, 100);
    }

    // è¨ˆæ™‚å™¨ï¼šæš«åœ
    function pauseTimer() {
      if (!running) return;
      running = false;
      clearInterval(timerInterval);
      timerInterval = null;
    }

    // è¨ˆæ™‚å™¨ï¼šæ¢å¾©
    function resumeTimer() {
      if (running) return;
      running = true;
      startTime = performance.now();
      timerInterval = setInterval(() => {
        const now = performance.now();
        elapsed += (now - startTime);
        startTime = now;
        updateTimerDisplay();
      }, 100);
    }

    // è¨ˆæ™‚å™¨ï¼šé‡ç½®
    function resetTimer() {
      pauseTimer();
      elapsed = 0;
      running = false;
      gameStarted = false;
      updateTimerDisplay();
      btnPause.style.display = '';
      btnResume.style.display = 'none';
      mobilePause.style.display = '';
      mobileResume.style.display = 'none';
      isPaused = false;
    }

    // æœ€ä½³æˆç¸¾
    const BEST_KEY = 'match-quote-best-time-ms';
    function loadBest() {
      const v = localStorage.getItem(BEST_KEY);
      if (v && !isNaN(+v)) {
        bestEl.textContent = formatTime(+v);
      } else {
        bestEl.textContent = 'â€”';
      }
    }
    
    function saveBestIfBetter(ms) {
      const v = localStorage.getItem(BEST_KEY);
      if (!v || ms < +v) {
        localStorage.setItem(BEST_KEY, String(ms));
        bestEl.textContent = formatTime(ms);
      }
    }

    // é¡¯ç¤ºå®Œæˆè¨Šæ¯
    function showCompletionMessage() {
      const overlay = document.createElement('div');
      overlay.className = 'overlay';
      
      const messageDiv = document.createElement('div');
      messageDiv.className = 'completed-message';
      messageDiv.innerHTML = `
        <h2>æ­å–œå®Œæˆï¼</h2>
        <p>æ‚¨ç”¨æ™‚: ${formatTime(elapsed)}</p>
        <p>${elapsed < 60000 ? 'ğŸ‰ å¤ªæ£’äº†ï¼' : 'ğŸ‘ åšå¾—å¾ˆå¥½ï¼'}</p>
        <button class="btn" onclick="this.parentElement.parentElement.remove()">ç¹¼çºŒéŠæˆ²</button>
      `;
      
      overlay.appendChild(messageDiv);
      document.body.appendChild(overlay);
    }

    // é–‹æ–°å±€
    function newGame() {
      statusEl.textContent = 'è«‹ç¿»é–‹å…©å¼µå¡ç‰Œé€²è¡Œé…å°';
      matchedCount = 0;
      firstCard = null; 
      secondCard = null; 
      lockBoard = false;

      // ç²å–é¸æ“‡çš„é›£åº¦
      totalPairs = parseInt(pairCountSelect.value);
      totalPairsEl.textContent = totalPairs;
      pairsEl.textContent = '0';

      // é¸å–åå¥
      selectedQuotes = pickRandomQuotes(totalPairs);

      // åˆå§‹åŒ–ç­”æ¡ˆæ¬„
      initAnswerBoard();

      // å»ºç«‹å¡ç‰Œ
      cards = [];
      selectedQuotes.forEach((item) => {
        cards.push({ id: item.id, type: 'text', value: item.text });
        cards.push({ id: item.id, type: 'source', value: item.source });
      });
      shuffle(cards);

      // æ¸²æŸ“
      boardEl.innerHTML = '';
      cards.forEach((card, i) => {
        const div = document.createElement('div');
        div.className = 'card';
        div.dataset.idx = i;
        div.dataset.id = card.id;
        div.dataset.type = card.type;
        
        // å¡ç‰‡æ­£é¢ - é¡¯ç¤º"ç¿»ç‰Œ"
        const cardFront = document.createElement('div');
        cardFront.className = 'card-front';
        cardFront.innerText = 'ç¿»ç‰Œ';
        
        // å¡ç‰‡èƒŒé¢ - é¡¯ç¤ºå…§å®¹
        const cardBack = document.createElement('div');
        cardBack.className = 'card-back';
        cardBack.innerText = card.value;
        
        div.appendChild(cardFront);
        div.appendChild(cardBack);
        
        // ä½¿ç”¨äº‹ä»¶å§”æ´¾è€Œä¸æ˜¯ç›´æ¥ç¶å®šäº‹ä»¶
        boardEl.appendChild(div);
      });

      // æ ¹æ“šé›£åº¦èª¿æ•´ç¶²æ ¼
      if (totalPairs <= 5) {
        boardEl.style.gridTemplateColumns = 'repeat(5, 1fr)';
      } else if (totalPairs <= 8) {
        boardEl.style.gridTemplateColumns = 'repeat(4, 1fr)';
      } else {
        boardEl.style.gridTemplateColumns = 'repeat(5, 1fr)';
      }

      // é‡ç½®è¨ˆæ™‚å™¨
      resetTimer();
      
      // é‡æ–°ç¶å®šå¡ç‰‡é»æ“Šäº‹ä»¶
      bindCardEvents();
    }

    // ç¶å®šå¡ç‰‡äº‹ä»¶
    function bindCardEvents() {
      const cardElements = boardEl.querySelectorAll('.card');
      cardElements.forEach((div, i) => {
        const card = cards[i];
        // ç§»é™¤èˆŠçš„äº‹ä»¶ç›£è½å™¨
        div.onclick = null;
        div.ontouchstart = null;
        
        // æ·»åŠ æ–°çš„äº‹ä»¶ç›£è½å™¨
        div.addEventListener('click', () => flipCard(div, card, i));
        div.addEventListener('touchstart', (e) => {
          if (e.touches.length === 1) { // ç¢ºä¿æ˜¯å–®æŒ‡è§¸æ§
            e.preventDefault(); // é˜²æ­¢æ‰‹æ©Ÿä¸Šçš„é»˜èªè¡Œç‚º
            flipCard(div, card, i);
          }
        }, { passive: false });
      });
    }

    // ç¿»ç‰Œ
    function flipCard(div, card, idx) {
      if (lockBoard || isPaused || div.classList.contains('matched')) return;
      if (div.classList.contains('flipped')) return;

      // ç¬¬ä¸€æ¬¡ç¿»ç‰Œæ‰é–‹å•Ÿè¨ˆæ™‚
      if (!gameStarted) {
        startTimer(); // ç›´æ¥å•Ÿå‹•è¨ˆæ™‚å™¨
      }

      div.classList.add('flipped');

      if (!firstCard) {
        firstCard = { div, card, idx };
      } else {
        secondCard = { div, card, idx };
        lockBoard = true;

        // æª¢æŸ¥é…å°
        if (
          firstCard.card.id === secondCard.card.id &&
          firstCard.card.type !== secondCard.card.type
        ) {
          // é…å°æˆåŠŸ
          setTimeout(() => {
            firstCard.div.classList.add('matched');
            secondCard.div.classList.add('matched');
            
            // å¾éŠæˆ²æ¿ä¸Šç§»é™¤é…å°æˆåŠŸçš„å¡ç‰‡
            setTimeout(() => {
              firstCard.div.style.visibility = 'hidden';
              secondCard.div.style.visibility = 'hidden';
            }, 500);
            
            // æ›´æ–°ç­”æ¡ˆæ¬„
            const quote = selectedQuotes.find(q => q.id === firstCard.card.id);
            if (quote) {
              updateAnswerBoard(quote.id, quote.text, quote.source);
            }
            
            matchedCount++;
            pairsEl.textContent = matchedCount;
            resetTurn();

            if (matchedCount === totalPairs) {
              pauseTimer();
              statusEl.textContent = `æ­å–œä½ å…¨éƒ¨é…å°æˆåŠŸï¼ç”¨æ™‚ï¼š${formatTime(elapsed)}`;
              saveBestIfBetter(elapsed);
              setTimeout(showCompletionMessage, 500);
            }
          }, 500);
        } else {
          // é…å°å¤±æ•—
          setTimeout(() => {
            firstCard.div.classList.remove('flipped');
            secondCard.div.classList.remove('flipped');
            resetTurn();
          }, 1000);
        }
      }
    }

    function resetTurn() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }

    // æŒ‰éˆ•äº‹ä»¶
    function setupButtonEvents() {
      // æ¡Œé¢ç‰ˆæŒ‰éˆ•
      btnNew.addEventListener('click', newGame);
      btnPause.addEventListener('click', pauseGame);
      btnResume.addEventListener('click', resumeGame);
      btnHome.addEventListener('click', goHome);
      
      // æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•
      mobileNew.addEventListener('click', newGame);
      mobilePause.addEventListener('click', pauseGame);
      mobileResume.addEventListener('click', resumeGame);
      mobileHome.addEventListener('click', goHome);
    }
    
    function pauseGame() {
      pauseTimer();
      isPaused = true;
      btnPause.style.display = 'none';
      btnResume.style.display = '';
      mobilePause.style.display = 'none';
      mobileResume.style.display = '';
      statusEl.textContent = 'å·²æš«åœã€‚é»é¸ã€Œç¹¼çºŒã€ç¹¼çºŒéŠæˆ²ã€‚';
    }
    
    function resumeGame() {
      resumeTimer();
      isPaused = false;
      btnPause.style.display = '';
      btnResume.style.display = 'none';
      mobilePause.style.display = '';
      mobileResume.style.display = 'none';
      statusEl.textContent = 'è«‹ç¿»é–‹å…©å¼µå¡ç‰Œé€²è¡Œé…å°';
    }
    
    function goHome() {
      window.location.href = "https://wongonkei825-alt.github.io/MBC/1-400_home_page.html";
    }

    // é›£åº¦é¸æ“‡äº‹ä»¶
    pairCountSelect.addEventListener('change', newGame);

    // åˆå§‹åŒ–
    function init() {
      loadBest();
      setupButtonEvents();
      newGame();
    }

    // å•Ÿå‹•éŠæˆ²
    init();
  </script>
</body>
</html>
